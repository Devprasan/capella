var capella=function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";n(1),e.exports=n(2)},function(e,t){},function(e,t,n){"use strict";var o={};o.ajax=n(3),o.transport=n(4),o.uploader=n(5),o.buffer=n(6),o.init=function(){o.uploader.init()},e.exports=o},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";e.exports=function(){var e=function(e){return e instanceof FormData};return{call:function(t){if(t&&t.url){var n=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),o=t.progress||null,r=t.success||function(){},a=t.error||function(){},u=t.before||null,i=t.after||null;if(t.async=!0,t.type=t.type||"GET",t.data=t.data||"",t["content-type"]=t["content-type"]||"application/json; charset=utf-8","GET"===t.type&&t.data&&(t.url=/\?/.test(t.url)?t.url+"&"+t.data:t.url+"?"+t.data),t.withCredentials&&(n.withCredentials=!0),u&&"function"==typeof u&&u(),n.open(t.type,t.url,t.async),!e(t.data)){var c=new FormData;for(var l in t.data)c.append(l,t.data[l]);t.data=c}o&&"function"==typeof o&&n.upload.addEventListener("progress",function(e){var t=parseInt(e.loaded/e.total*100);o(t)},!1),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=function(){if(4===n.readyState){var e=n.responseText;try{e=JSON.parse(e)}catch(e){}200===n.status?r(e):a(e),i&&"function"==typeof i&&i()}},n.send(t.data)}}}}()}])})},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(1);e.exports=function(e){var t=null;e.input=null;var n=function(){e.input.click()},a=function(){var n=t.url,a=t.data,u=t.before,i=t.progress,c=t.success,l=t.error,s=t.after,p=new FormData,f=e.input.files;if(f.length>1)for(var d=0;d<f.length;d++)p.append("files[]",f[d],f[d].name);else p.append("files",f[0],f[0].name);if(null!==a&&"object"===(void 0===a?"undefined":o(a)))for(var y in a)p.append(y,a[y]);r.call({type:"POST",data:p,url:n,before:u,progress:i,success:c,error:l,after:s})};return e.init=function(o){if(!o.url)return void console.log("Can't send request because `url` is missed");t=o;var r=document.createElement("INPUT");r.type="file",t&&t.multiple&&r.setAttribute("multiple","multiple"),t&&t.accept&&r.setAttribute("accept",t.accept),r.addEventListener("change",a,!1),e.input=r,n()},e}({})},function(e,t,n){!function(t,n){e.exports=function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";e.exports=function(){var e=function(e){return e instanceof FormData};return{call:function(t){if(t&&t.url){var n=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),o=t.progress||null,r=t.success||function(){},a=t.error||function(){},u=t.before||null,i=t.after||null;if(t.async=!0,t.type=t.type||"GET",t.data=t.data||"",t["content-type"]=t["content-type"]||"application/json; charset=utf-8","GET"===t.type&&t.data&&(t.url=/\?/.test(t.url)?t.url+"&"+t.data:t.url+"?"+t.data),t.withCredentials&&(n.withCredentials=!0),u&&"function"==typeof u&&u(),n.open(t.type,t.url,t.async),!e(t.data)){var c=new FormData;for(var l in t.data)c.append(l,t.data[l]);t.data=c}o&&"function"==typeof o&&n.upload.addEventListener("progress",function(e){var t=parseInt(e.loaded/e.total*100);o(t)},!1),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=function(){if(4===n.readyState){var e=n.responseText;try{e=JSON.parse(e)}catch(e){}200===n.status?r(e):a(e),i&&"function"==typeof i&&i()}},n.send(t.data)}}}}()}])}()}()}])})},function(e,t,n){"use strict";var o={uploadUrl:"/upload",uploadFileButton:null,uploadLinkField:null,imageWrapper:null,imageLinkWrapper:null,init:function(){o.uploadFileButton=document.getElementById("uploadFileButton"),o.uploadLinkField=document.getElementById("uploadLinkField"),o.imageWrapper=document.getElementById("imageWrapper"),o.imageLinkWrapper=document.getElementById("imageLinkWrapper"),o.uploadFileButton&&o.uploadFileButton.addEventListener("click",o.chooseFile,!1),o.uploadLinkField&&o.uploadLinkField.addEventListener("keydown",o.enterLink,!1)},enterLink:function(e){13===e.keyCode&&(e.preventDefault(),o.uploadLinkField&&capella.ajax.call({type:"POST",url:o.uploadUrl,data:{link:o.uploadLinkField.value},before:function(){},progress:function(e){console.log(e+"%")},success:function(e){console.log(e),e.success&&(window.location.href=e.url)},error:function(e){console.log(e)},after:function(){}}))},chooseFile:function(){capella.transport.init({url:o.uploadUrl,multiple:!1,accept:"image/*",data:{},before:function(){},progress:function(e){console.log(e+"%")},success:function(e){console.log(e),e.success&&(window.location.href=e.url)},error:function(e){console.log(e)},after:function(){}})}};e.exports={init:o.init}},function(e,t,n){"use strict";!function(){function e(e){document.body.appendChild(o);for(var n=(e.clipboardData||e.originalEvent.clipboardData).items,r=null,a=0;a<n.length;a++)0===n[a].type.indexOf("image")&&(r=n[a].getAsFile());if(null!==r){var u=new FileReader;u.onload=function(e){document.body.removeChild(o);var n=new FormData;n.append("ImageFile",r,r.name),t(n)},u.readAsDataURL(r)}}function t(e){capella.ajax.call({type:"POST",url:"/upload",data:e,before:function(){},progress:function(e){console.log(e+"%")},success:function(e){console.log(e),e.success&&(window.location.href=e.url)},error:function(e){console.log(e)},after:function(){}})}var n=document.createElement("img"),o=document.createTextNode("UPLOADING");document.body.addEventListener("paste",e),document.body.appendChild(n)}()}]);
//# sourceMappingURL=bundle.js.map