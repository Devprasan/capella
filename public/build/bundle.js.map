{"version":3,"sources":["webpack:///public/build/bundle.js","webpack:///webpack/bootstrap af4cdfc6db89cbe0772d","webpack:///./public/app/js/uploader.js","webpack:///./public/app/entry.js","webpack:///./public/app/js/main.js","webpack:///./node_modules/codex.ajax/lib/bundle.js","webpack:///./node_modules/codex.transport/lib/bundle.js","webpack:///./public/app/js/clipboard.js","webpack:///./public/app/js/dragndrop.js","webpack:///./public/app/js/scene.js"],"names":["capella","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","Uploader","this","uploadUrl","uploadFileButton","document","getElementById","uploadLinkField","pageWrapper","getElementsByClassName","progressBar","_this","addEventListener","uploadByTransport","bind","uploadByUrl","transport","init","url","multiple","accept","data","before","progress","success","error","after","e","keyCode","preventDefault","upload","link","ajax","type","scene","uploadScreen","show","percentage","console","log","response","window","location","href","hide","default","Clipboard","DNDFileUploader","uploader","clipboard","dnd","t","r","FormData","XMLHttpRequest","ActiveXObject","a","u","async","test","withCredentials","open","append","parseInt","loaded","total","setRequestHeader","onreadystatechange","readyState","responseText","JSON","parse","status","send","Symbol","iterator","constructor","input","click","f","files","y","createElement","setAttribute","body","pasteFromClipboard","event","items","clipboardData","originalEvent","blob","indexOf","getAsFile","reader","FileReader","onload","formData","readAsDataURL","wrapper","querySelector","dragover","drageleave","drop","classList","add","remove","file","dataTransfer","mainContainer","percents"],"mappings":"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","file":"./public/build/bundle.js","sourcesContent":["var capella =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * @class Uploader\n * Handle images uploading\n *\n * @property {String} uploadUrl — url to upload images\n * @property {HTMLElement} uploadFilButton — transport initialization trigger\n * @property {HTMLElement} uploadLinkField — input to insert image link\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Uploader = function () {\n  /**\n   * Uploader class constructor. Get needed elements and bind events\n   */\n  function Uploader() {\n    _classCallCheck(this, Uploader);\n\n    this.uploadUrl = '/upload';\n    this.uploadFileButton = document.getElementById('uploadFileButton');\n    this.uploadLinkField = document.getElementById('uploadLinkField');\n    this.pageWrapper = document.getElementsByClassName('capella')[0];\n    this.progressBar = document.getElementsByClassName('js-capella__uploading-progress')[0];\n    this._this = this;\n\n    if (this.uploadFileButton) {\n      this.uploadFileButton.addEventListener('click', this.uploadByTransport.bind(this), false);\n    }\n\n    if (this.uploadLinkField) {\n      this.uploadLinkField.addEventListener('keydown', this.uploadByUrl.bind(this), false);\n    }\n  }\n\n  /**\n   * Init codex.transport to select image from user's computer\n   */\n\n\n  _createClass(Uploader, [{\n    key: 'uploadByTransport',\n    value: function uploadByTransport() {\n      capella.transport.init({\n        url: this.uploadUrl,\n        multiple: false,\n        accept: 'image/*',\n        data: {},\n        before: this.before,\n        progress: this.progress,\n        success: this.success,\n        error: this.error,\n        after: this.after\n      });\n    }\n\n    /**\n     * Handle upload by image url\n     *\n     * @param e\n     */\n\n  }, {\n    key: 'uploadByUrl',\n    value: function uploadByUrl(e) {\n      /** Check for Enter key */\n      if (e.keyCode !== 13) {\n        return;\n      }\n      e.preventDefault();\n\n      if (this.uploadLinkField) {\n        this.upload({ 'link': this.uploadLinkField.value });\n      }\n    }\n\n    /**\n     * Send AJAX request to uploadUrl with passed data\n     *\n     * @param {*} data — data to send\n     */\n\n  }, {\n    key: 'upload',\n    value: function upload(data) {\n      capella.ajax.call({\n        type: 'POST',\n        url: this.uploadUrl,\n        data: data,\n        before: this.before,\n        progress: this.progress,\n        success: this.success,\n        error: this.error,\n        after: this.after\n      });\n    }\n\n    /**\n     * Method to call before upload starts\n     */\n\n  }, {\n    key: 'before',\n    value: function before() {\n      capella.scene.uploadScreen.show();\n    }\n\n    /**\n     *  Handle upload progress\n     *\n     * @param percentage — upload percentage\n     */\n\n  }, {\n    key: 'progress',\n    value: function progress(percentage) {\n      console.log(percentage + '%');\n      capella.scene.uploadScreen.progress(percentage);\n    }\n\n    /**\n     * Successful upload handler\n     *\n     * @param {Object} response — response object\n     * @param {Boolean} response.success — upload status\n     * @param {String} response.url — if upload was successful, contains uploaded image url\n     * @param {String} response.id — if upload was succesful, contains uploaded image id\n     * @param {String} response.message — if upload failed, contains reason\n     */\n\n  }, {\n    key: 'success',\n    value: function success(response) {\n      console.log(response);\n\n      if (response.success) {\n        /** Redirect to uploaded image */\n        window.location.href = response.url;\n      }\n    }\n\n    /**\n     * Upload error handler\n     *\n     * @param {Error} error — raised error\n     */\n\n  }, {\n    key: 'error',\n    value: function error(_error) {\n      console.log(_error);\n    }\n\n    /**\n     * Method to call after upload\n     */\n\n  }, {\n    key: 'after',\n    value: function after() {\n      capella.scene.uploadScreen.hide();\n    }\n  }]);\n\n  return Uploader;\n}();\n\nexports.default = Uploader;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Require CSS build\n */\n__webpack_require__(2);\n\nmodule.exports = __webpack_require__(3);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar capella = {};\n\nvar Uploader = __webpack_require__(0).default;\nvar Clipboard = __webpack_require__(7).default;\nvar DNDFileUploader = __webpack_require__(8).default;\n\n/**\n * Require modules\n */\ncapella.ajax = __webpack_require__(4);\ncapella.transport = __webpack_require__(5);\ncapella.scene = __webpack_require__(9);\ncapella.uploader = __webpack_require__(0);\n\ncapella.uploader = new Uploader();\ncapella.clipboard = new Clipboard();\ncapella.dnd = new DNDFileUploader('.capella');\n\ncapella.init = function () {};\n\nmodule.exports = capella;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(t,e){ true?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.ajax=e():t.ajax=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,n){\"use strict\";t.exports=function(){var t=function(t){return t instanceof FormData};return{call:function(e){if(e&&e.url){var n=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject(\"Microsoft.XMLHTTP\"),r=e.progress||null,o=e.success||function(){},a=e.error||function(){},u=e.before||null,i=e.after||null;if(e.async=!0,e.type=e.type||\"GET\",e.data=e.data||\"\",e[\"content-type\"]=e[\"content-type\"]||\"application/json; charset=utf-8\",\"GET\"===e.type&&e.data&&(e.url=/\\?/.test(e.url)?e.url+\"&\"+e.data:e.url+\"?\"+e.data),e.withCredentials&&(n.withCredentials=!0),u&&\"function\"==typeof u&&u(),n.open(e.type,e.url,e.async),!t(e.data)){var c=new FormData;for(var s in e.data)c.append(s,e.data[s]);e.data=c}r&&\"function\"==typeof r&&n.upload.addEventListener(\"progress\",function(t){var e=parseInt(t.loaded/t.total*100);r(e)},!1),n.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),n.onreadystatechange=function(){if(4===n.readyState){var t=n.responseText;try{t=JSON.parse(t)}catch(t){}200===n.status?o(t):a(t),i&&\"function\"==typeof i&&i()}},n.send(e.data)}}}}()}])});\n//# sourceMappingURL=bundle.js.map\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(t,e){ true?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.transport=e():t.transport=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,n){\"use strict\";var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},o=n(1);t.exports=function(t){var e=null;t.input=null;var n=function(){t.input.click()},u=function(){var n=e.url,u=e.data,a=e.before,i=e.progress,c=e.success,s=e.error,f=e.after,p=new FormData,l=t.input.files;if(l.length>1)for(var d=0;d<l.length;d++)p.append(\"files[]\",l[d],l[d].name);else p.append(\"file\",l[0],l[0].name);if(null!==u&&\"object\"===(void 0===u?\"undefined\":r(u)))for(var y in u)p.append(y,u[y]);o.call({type:\"POST\",data:p,url:n,before:a,progress:i,success:c,error:s,after:f})};return t.init=function(r){if(!r.url)return void console.log(\"Can't send request because `url` is missed\");e=r;var o=document.createElement(\"INPUT\");o.type=\"file\",e&&e.multiple&&o.setAttribute(\"multiple\",\"multiple\"),e&&e.accept&&o.setAttribute(\"accept\",e.accept),o.addEventListener(\"change\",u,!1),t.input=o,n()},t}({})},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,n){\"use strict\";t.exports=function(){var t=function(t){return t instanceof FormData};return{call:function(e){if(e&&e.url){var n=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject(\"Microsoft.XMLHTTP\"),r=e.progress||null,o=e.success||function(){},u=e.error||function(){},a=e.before||null,i=e.after||null;if(e.async=!0,e.type=e.type||\"GET\",e.data=e.data||\"\",e[\"content-type\"]=e[\"content-type\"]||\"application/json; charset=utf-8\",\"GET\"===e.type&&e.data&&(e.url=/\\?/.test(e.url)?e.url+\"&\"+e.data:e.url+\"?\"+e.data),e.withCredentials&&(n.withCredentials=!0),a&&\"function\"==typeof a&&a(),n.open(e.type,e.url,e.async),!t(e.data)){var c=new FormData;for(var s in e.data)c.append(s,e.data[s]);e.data=c}r&&\"function\"==typeof r&&n.upload.addEventListener(\"progress\",function(t){var e=parseInt(t.loaded/t.total*100);r(e)},!1),n.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),n.onreadystatechange=function(){if(4===n.readyState){var t=n.responseText;try{t=JSON.parse(t)}catch(t){}200===n.status?o(t):u(t),i&&\"function\"==typeof i&&i()}},n.send(e.data)}}}}()}])})}])});\n//# sourceMappingURL=bundle.js.map\n\n/***/ }),\n/* 6 */,\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Paste from clipboard module\n */\nvar Clipboard = function () {\n  /**\n   * Initialization of Clipboard module\n   */\n  function Clipboard() {\n    _classCallCheck(this, Clipboard);\n\n    document.body.addEventListener('paste', this.pasteFromClipboard);\n  }\n\n  /**\n   * Pasted image from clipboard\n   */\n\n\n  _createClass(Clipboard, [{\n    key: 'pasteFromClipboard',\n    value: function pasteFromClipboard(event) {\n      /**\n       * items - data from clipboard\n       */\n      var items = (event.clipboardData || event.originalEvent.clipboardData).items;\n      var blob = null;\n\n      /**\n       * Checking all clipboard's files and choosing last image file\n       */\n      for (var i = items.length - 1; i >= 0; --i) {\n        if (items[i].type.indexOf('image') === 0) {\n          blob = items[i].getAsFile();\n          break;\n        }\n      }\n\n      if (blob !== null) {\n        /**\n         * FilerReader is used for asynchronous image reading from blob: function at onload\n         */\n        var reader = new FileReader();\n\n        reader.onload = function () {\n          var formData = new FormData();\n\n          formData.append('file', blob, blob.name);\n\n          capella.uploader.upload(formData);\n        };\n        reader.readAsDataURL(blob);\n      }\n    }\n  }]);\n\n  return Clipboard;\n}();\n\nexports.default = Clipboard;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Class for working with drag and drop files to browser\n *\n * @class DNDFileUploader\n *\n * @property {HTMLElement} wrapper — page wrapper element\n *\n */\nvar DNDFileUploader = function () {\n  /**\n   * Bind drag and drop events\n   *\n   * @param {String} wrapper - page wrapper selector\n   */\n  function DNDFileUploader(wrapper) {\n    _classCallCheck(this, DNDFileUploader);\n\n    this.wrapper = document.querySelector(wrapper);\n\n    this.wrapper.addEventListener('dragenter', this.dragover.bind(this));\n    this.wrapper.addEventListener('dragover', this.dragover.bind(this));\n    this.wrapper.addEventListener('dragleave', this.drageleave.bind(this));\n    this.wrapper.addEventListener('drop', this.drop.bind(this));\n  }\n\n  /**\n   *\n   * File dragover handler\n   *\n   * @param {Event} event — dragover event\n   */\n\n\n  _createClass(DNDFileUploader, [{\n    key: 'dragover',\n    value: function dragover(event) {\n      event.preventDefault();\n\n      this.wrapper.classList.add('capella--dark');\n    }\n\n    /**\n     *\n     * File dragleave handler\n     *\n     * @param {Event} event — dragleave event\n     */\n\n  }, {\n    key: 'drageleave',\n    value: function drageleave(event) {\n      event.preventDefault();\n\n      this.wrapper.classList.remove('capella--dark');\n    }\n\n    /**\n     * File drop handler\n     *\n     * @param {Event} event — drop event\n     */\n\n  }, {\n    key: 'drop',\n    value: function drop(event) {\n      this.wrapper.classList.remove('capella--dark');\n\n      var file = event.dataTransfer.files[0];\n      var formData = new FormData();\n\n      formData.append('file', file, file.name);\n\n      capella.uploader.upload(formData);\n\n      event.preventDefault();\n    }\n  }]);\n\n  return DNDFileUploader;\n}();\n\nexports.default = DNDFileUploader;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function () {\n  var mainContainer = document.getElementsByClassName('capella')[0];\n  var progressBar = document.getElementsByClassName('js-capella__uploading-progress')[0];\n\n  var uploadScreen = {\n    show: function show() {\n      mainContainer.classList.add('capella--loading');\n    },\n\n    hide: function hide() {\n      mainContainer.classList.remove('capella--loading');\n    },\n\n    progress: function progress(percents) {\n      progressBar.setAttribute('value', percents);\n    }\n  };\n\n  return {\n    uploadScreen: uploadScreen\n  };\n}();\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// public/build/bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap af4cdfc6db89cbe0772d","'use strict';\n\n/**\n * @class Uploader\n * Handle images uploading\n *\n * @property {String} uploadUrl — url to upload images\n * @property {HTMLElement} uploadFilButton — transport initialization trigger\n * @property {HTMLElement} uploadLinkField — input to insert image link\n */\nexport default class Uploader {\n  /**\n   * Uploader class constructor. Get needed elements and bind events\n   */\n  constructor() {\n    this.uploadUrl = '/upload';\n    this.uploadFileButton = document.getElementById('uploadFileButton');\n    this.uploadLinkField = document.getElementById('uploadLinkField');\n    this.pageWrapper = document.getElementsByClassName('capella')[0];\n    this.progressBar = document.getElementsByClassName('js-capella__uploading-progress')[0];\n    this._this = this;\n\n    if (this.uploadFileButton) {\n      this.uploadFileButton.addEventListener('click', this.uploadByTransport.bind(this), false);\n    }\n\n    if (this.uploadLinkField) {\n      this.uploadLinkField.addEventListener('keydown', this.uploadByUrl.bind(this), false);\n    }\n  }\n\n  /**\n   * Init codex.transport to select image from user's computer\n   */\n  uploadByTransport() {\n    capella.transport.init({\n      url: this.uploadUrl,\n      multiple: false,\n      accept: 'image/*',\n      data: {},\n      before: this.before,\n      progress: this.progress,\n      success: this.success,\n      error: this.error,\n      after: this.after\n    });\n  }\n\n  /**\n   * Handle upload by image url\n   *\n   * @param e\n   */\n  uploadByUrl(e) {\n    /** Check for Enter key */\n    if (e.keyCode !== 13) {\n      return;\n    }\n    e.preventDefault();\n\n    if (this.uploadLinkField) {\n      this.upload({'link': this.uploadLinkField.value});\n    }\n  }\n\n  /**\n   * Send AJAX request to uploadUrl with passed data\n   *\n   * @param {*} data — data to send\n   */\n  upload(data) {\n    capella.ajax.call({\n      type: 'POST',\n      url: this.uploadUrl,\n      data: data,\n      before: this.before,\n      progress: this.progress,\n      success: this.success,\n      error: this.error,\n      after: this.after\n    });\n  }\n\n  /**\n   * Method to call before upload starts\n   */\n  before() {\n    capella.scene.uploadScreen.show();\n  }\n\n  /**\n   *  Handle upload progress\n   *\n   * @param percentage — upload percentage\n   */\n  progress(percentage) {\n    console.log(percentage + '%');\n    capella.scene.uploadScreen.progress(percentage);\n  }\n\n  /**\n   * Successful upload handler\n   *\n   * @param {Object} response — response object\n   * @param {Boolean} response.success — upload status\n   * @param {String} response.url — if upload was successful, contains uploaded image url\n   * @param {String} response.id — if upload was succesful, contains uploaded image id\n   * @param {String} response.message — if upload failed, contains reason\n   */\n  success(response) {\n    console.log(response);\n\n    if (response.success) {\n      /** Redirect to uploaded image */\n      window.location.href = response.url;\n    }\n  }\n\n  /**\n   * Upload error handler\n   *\n   * @param {Error} error — raised error\n   */\n  error(error) {\n    console.log(error);\n  }\n\n  /**\n   * Method to call after upload\n   */\n  after() {\n    capella.scene.uploadScreen.hide();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/app/js/uploader.js","/**\n * Require CSS build\n */\nrequire('./css/main.css');\n\nmodule.exports = require('./js/main.js');\n\n\n\n// WEBPACK FOOTER //\n// ./public/app/entry.js","'use strict';\n\n\nconst capella = {};\n\nlet Uploader = require('./uploader').default;\nlet Clipboard = require('./clipboard').default;\nlet DNDFileUploader = require('./dragndrop').default;\n\n/**\n * Require modules\n */\ncapella.ajax = require('codex.ajax');\ncapella.transport = require('codex.transport');\ncapella.scene = require('./scene');\ncapella.uploader = require('./uploader');\n\ncapella.uploader = new Uploader();\ncapella.clipboard = new Clipboard();\ncapella.dnd = new DNDFileUploader('.capella');\n\ncapella.init = function () {};\n\nmodule.exports = capella;\n\n\n\n// WEBPACK FOOTER //\n// ./public/app/js/main.js","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.ajax=e():t.ajax=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,n){\"use strict\";t.exports=function(){var t=function(t){return t instanceof FormData};return{call:function(e){if(e&&e.url){var n=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject(\"Microsoft.XMLHTTP\"),r=e.progress||null,o=e.success||function(){},a=e.error||function(){},u=e.before||null,i=e.after||null;if(e.async=!0,e.type=e.type||\"GET\",e.data=e.data||\"\",e[\"content-type\"]=e[\"content-type\"]||\"application/json; charset=utf-8\",\"GET\"===e.type&&e.data&&(e.url=/\\?/.test(e.url)?e.url+\"&\"+e.data:e.url+\"?\"+e.data),e.withCredentials&&(n.withCredentials=!0),u&&\"function\"==typeof u&&u(),n.open(e.type,e.url,e.async),!t(e.data)){var c=new FormData;for(var s in e.data)c.append(s,e.data[s]);e.data=c}r&&\"function\"==typeof r&&n.upload.addEventListener(\"progress\",function(t){var e=parseInt(t.loaded/t.total*100);r(e)},!1),n.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),n.onreadystatechange=function(){if(4===n.readyState){var t=n.responseText;try{t=JSON.parse(t)}catch(t){}200===n.status?o(t):a(t),i&&\"function\"==typeof i&&i()}},n.send(e.data)}}}}()}])});\n//# sourceMappingURL=bundle.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/codex.ajax/lib/bundle.js\n// module id = 4\n// module chunks = 0","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.transport=e():t.transport=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,n){\"use strict\";var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},o=n(1);t.exports=function(t){var e=null;t.input=null;var n=function(){t.input.click()},u=function(){var n=e.url,u=e.data,a=e.before,i=e.progress,c=e.success,s=e.error,f=e.after,p=new FormData,l=t.input.files;if(l.length>1)for(var d=0;d<l.length;d++)p.append(\"files[]\",l[d],l[d].name);else p.append(\"file\",l[0],l[0].name);if(null!==u&&\"object\"===(void 0===u?\"undefined\":r(u)))for(var y in u)p.append(y,u[y]);o.call({type:\"POST\",data:p,url:n,before:a,progress:i,success:c,error:s,after:f})};return t.init=function(r){if(!r.url)return void console.log(\"Can't send request because `url` is missed\");e=r;var o=document.createElement(\"INPUT\");o.type=\"file\",e&&e.multiple&&o.setAttribute(\"multiple\",\"multiple\"),e&&e.accept&&o.setAttribute(\"accept\",e.accept),o.addEventListener(\"change\",u,!1),t.input=o,n()},t}({})},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,n){\"use strict\";t.exports=function(){var t=function(t){return t instanceof FormData};return{call:function(e){if(e&&e.url){var n=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject(\"Microsoft.XMLHTTP\"),r=e.progress||null,o=e.success||function(){},u=e.error||function(){},a=e.before||null,i=e.after||null;if(e.async=!0,e.type=e.type||\"GET\",e.data=e.data||\"\",e[\"content-type\"]=e[\"content-type\"]||\"application/json; charset=utf-8\",\"GET\"===e.type&&e.data&&(e.url=/\\?/.test(e.url)?e.url+\"&\"+e.data:e.url+\"?\"+e.data),e.withCredentials&&(n.withCredentials=!0),a&&\"function\"==typeof a&&a(),n.open(e.type,e.url,e.async),!t(e.data)){var c=new FormData;for(var s in e.data)c.append(s,e.data[s]);e.data=c}r&&\"function\"==typeof r&&n.upload.addEventListener(\"progress\",function(t){var e=parseInt(t.loaded/t.total*100);r(e)},!1),n.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),n.onreadystatechange=function(){if(4===n.readyState){var t=n.responseText;try{t=JSON.parse(t)}catch(t){}200===n.status?o(t):u(t),i&&\"function\"==typeof i&&i()}},n.send(e.data)}}}}()}])})}])});\n//# sourceMappingURL=bundle.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/codex.transport/lib/bundle.js\n// module id = 5\n// module chunks = 0","/**\n * Paste from clipboard module\n */\nexport default class Clipboard {\n  /**\n   * Initialization of Clipboard module\n   */\n  constructor() {\n    document.body.addEventListener('paste', this.pasteFromClipboard);\n  }\n\n  /**\n   * Pasted image from clipboard\n   */\n  pasteFromClipboard(event) {\n    /**\n     * items - data from clipboard\n     */\n    let items = (event.clipboardData  || event.originalEvent.clipboardData).items;\n    let blob = null;\n\n    /**\n     * Checking all clipboard's files and choosing last image file\n     */\n    for (let i = items.length - 1; i >= 0; --i) {\n      if (items[i].type.indexOf('image') === 0) {\n        blob = items[i].getAsFile();\n        break;\n      }\n    }\n\n    if (blob !== null) {\n      /**\n       * FilerReader is used for asynchronous image reading from blob: function at onload\n       */\n      let reader = new FileReader();\n\n      reader.onload = function () {\n        let formData = new FormData();\n\n        formData.append('file', blob, blob.name);\n\n        capella.uploader.upload(formData);\n      };\n      reader.readAsDataURL(blob);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/app/js/clipboard.js","/**\n * Class for working with drag and drop files to browser\n *\n * @class DNDFileUploader\n *\n * @property {HTMLElement} wrapper — page wrapper element\n *\n */\nexport default class DNDFileUploader {\n  /**\n   * Bind drag and drop events\n   *\n   * @param {String} wrapper - page wrapper selector\n   */\n  constructor(wrapper) {\n    this.wrapper = document.querySelector(wrapper);\n\n    this.wrapper.addEventListener('dragenter', this.dragover.bind(this));\n    this.wrapper.addEventListener('dragover', this.dragover.bind(this));\n    this.wrapper.addEventListener('dragleave', this.drageleave.bind(this));\n    this.wrapper.addEventListener('drop', this.drop.bind(this));\n  }\n\n  /**\n   *\n   * File dragover handler\n   *\n   * @param {Event} event — dragover event\n   */\n  dragover(event) {\n    event.preventDefault();\n\n    this.wrapper.classList.add('capella--dark');\n  }\n\n  /**\n   *\n   * File dragleave handler\n   *\n   * @param {Event} event — dragleave event\n   */\n  drageleave(event) {\n    event.preventDefault();\n\n    this.wrapper.classList.remove('capella--dark');\n  }\n\n  /**\n   * File drop handler\n   *\n   * @param {Event} event — drop event\n   */\n  drop(event) {\n    this.wrapper.classList.remove('capella--dark');\n\n    let file = event.dataTransfer.files[0];\n    let formData = new FormData();\n\n    formData.append('file', file, file.name);\n\n    capella.uploader.upload(formData);\n\n    event.preventDefault();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./public/app/js/dragndrop.js","'use strict';\n\nmodule.exports = (function () {\n  let mainContainer = document.getElementsByClassName('capella')[0];\n  let progressBar = document.getElementsByClassName('js-capella__uploading-progress')[0];\n\n  let uploadScreen = {\n    show: function () {\n      mainContainer.classList.add('capella--loading');\n    },\n\n    hide: function () {\n      mainContainer.classList.remove('capella--loading');\n    },\n\n    progress: function (percents) {\n      progressBar.setAttribute('value', percents);\n    }\n  };\n\n  return {\n    uploadScreen\n  };\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./public/app/js/scene.js"],"sourceRoot":""}